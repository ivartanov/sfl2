<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1644px" preserveAspectRatio="none" style="width:513px;height:1644px;background:#FFFFFF;" version="1.1" viewBox="0 0 513 1644" width="513px" zoomAndPan="magnify"><defs/><g><ellipse cx="253.29" cy="16" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M19.5,103 L487.088,103 A12.5,12.5 0 0 1 499.588,115.5 L499.588,129.4883 L7,129.4883 L7,115.5 A12.5,12.5 0 0 1 19.5,103 " fill="#F1F1F1" style="stroke:#F1F1F1;stroke-width:1.0;"/><rect fill="none" height="1452.2883" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="492.588" x="7" y="103"/><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="499.588" y1="129.4883" y2="129.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.7734" x="230.4073" y="121.5352">_tmain</text><ellipse cx="136.84" cy="150.4883" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><g id="_tmain.PreMain"><rect fill="#FFD700" height="163.6836" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="235.6777" x="19" y="213.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="19" x2="254.6777" y1="239.9766" y2="239.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.792" x="109.9429" y="232.0234">PreMain</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215.6777" x="24" y="256.5781">(void by default, just returning TRUE)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="24" y="270.7109">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.4316" x="24" y="284.8438">here you can analyze</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148.623" x="24" y="298.9766">command line arguments</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.709" x="24" y="313.1094">and decide whether you run</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158.4785" x="24" y="327.2422">user mode or service mode</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="24" y="341.375">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.0996" x="24" y="355.5078">(return FALSE to prevent</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130.1836" x="24" y="369.6406">running service mode)</text></g><ellipse cx="136.84" cy="1534.2883" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="136.84" cy="1534.2883" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><path d="M161.58,430.1683 L478.088,430.1683 A12.5,12.5 0 0 1 490.588,442.6683 L490.588,504.055 L149.08,504.055 L149.08,442.6683 A12.5,12.5 0 0 1 161.58,430.1683 " fill="#F1F1F1" style="stroke:#F1F1F1;stroke-width:1.0;"/><rect fill="none" height="879.9667" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="341.508" x="149.08" y="430.1683"/><line style="stroke:#181818;stroke-width:0.5;" x1="149.08" x2="490.588" y1="504.055" y2="504.055"/><line style="stroke:#181818;stroke-width:0.5;" x1="149.08" x2="490.588" y1="456.6566" y2="456.6566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.5254" x="303.5713" y="448.7034">Main</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146.4844" x="154.08" y="468.2581">here the table of services</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167.1211" x="154.08" y="482.3909">is built from the service map</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.084" x="154.08" y="496.5238">to be passed to Run()</text><ellipse cx="318.83" cy="525.055" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M173.58,588.055 L464.088,588.055 A12.5,12.5 0 0 1 476.588,600.555 L476.588,614.5433 L161.08,614.5433 L161.08,600.555 A12.5,12.5 0 0 1 173.58,588.055 " fill="#F1F1F1" style="stroke:#F1F1F1;stroke-width:1.0;"/><rect fill="none" height="637.0783" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="315.508" x="161.08" y="588.055"/><line style="stroke:#181818;stroke-width:0.5;" x1="161.08" x2="476.588" y1="614.5433" y2="614.5433"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2295" x="305.7192" y="606.5902">Run</text><ellipse cx="255.63" cy="635.5433" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><g id="_tmain.Main.Run.InitApp"><rect fill="#FFD700" height="93.0195" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="165.0957" x="173.08" y="698.5433"/><line style="stroke:#181818;stroke-width:0.5;" x1="173.08" x2="338.1757" y1="725.0316" y2="725.0316"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.2871" x="230.9843" y="717.0784">InitApp</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="178.08" y="741.6331">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="178.08" y="755.7659">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145.0957" x="178.08" y="769.8988">here you init application,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.5254" x="178.08" y="784.0316">but not your services</text></g><ellipse cx="255.63" cy="1204.1333" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="255.63" cy="1204.1333" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><g id="_tmain.Main.Run.StartServices"><rect fill="#F1F1F1" height="149.5508" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="192.1426" x="269.56" y="844.5633"/><line style="stroke:#181818;stroke-width:0.5;" x1="269.56" x2="461.7026" y1="871.0516" y2="871.0516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.9414" x="322.6606" y="863.0984">StartServices</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149.4785" x="274.56" y="887.6531">makes a call of Win32 API</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.9453" x="274.56" y="901.7859">StartServiceCtrlDispatcher;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="274.56" y="915.9188">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139.1191" x="274.56" y="930.0516">this is where SCM starts</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="147.9902" x="274.56" y="944.1844">bringing your services up</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="274.56" y="958.3172">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.9727" x="274.56" y="972.45">the call remains blocked</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172.1426" x="274.56" y="986.5828">untill all the services got shut</text></g><g id="_tmain.Main.Run.ExitApp"><rect fill="#FFD700" height="93.0195" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="199.918" x="267.67" y="1047.1133"/><line style="stroke:#181818;stroke-width:0.5;" x1="267.67" x2="467.588" y1="1073.6016" y2="1073.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.7393" x="341.2594" y="1065.6484">ExitApp</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="272.67" y="1090.2031">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="272.67" y="1104.3359">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179.918" x="272.67" y="1118.4688">here you release any resources</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113.3906" x="272.67" y="1132.6016">allocated at InitApp</text></g><!--link *start*Run to InitApp--><g id="link_*start*Run_InitApp"><path d="M255.63,645.7133 C255.63,657.3933 255.63,672.4233 255.63,692.0433 " fill="none" id="*start*Run-to-InitApp" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="255.63,698.0433,259.63,689.0433,255.63,693.0433,251.63,689.0433,255.63,698.0433" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.3926" x="256.63" y="677.1116">this-&gt;InitApp()</text></g><!--link InitApp to *end*Run--><g id="link_InitApp_*end*Run"><path d="M255.63,791.9733 C255.63,894.9733 255.63,1133.6133 255.63,1186.8133 " fill="none" id="InitApp-to-*end*Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="255.63,1192.8133,259.63,1183.8133,255.63,1187.8133,251.63,1183.8133,255.63,1192.8133" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.918" x="256.63" y="1025.6816">FALSE</text></g><!--link InitApp to StartServices--><g id="link_InitApp_StartServices"><path d="M284.82,791.7733 C295.06,807.8233 303.6316,821.2359 314.9816,839.0159 " fill="none" id="InitApp-to-StartServices" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="318.21,844.0733,316.739,834.3349,315.5196,839.8588,309.9958,838.6395,318.21,844.0733" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.4937" x="304.63" y="823.1316">TRUE</text></g><!--link StartServices to ExitApp--><g id="link_StartServices_ExitApp"><path d="M366.49,994.4033 C366.7,1012.2733 366.8393,1024.8637 367.0293,1040.9937 " fill="none" id="StartServices-to-ExitApp" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="367.1,1046.9933,370.9937,1037.9468,367.0411,1041.9936,362.9943,1038.041,367.1,1046.9933" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.5981" x="367.63" y="1025.6816">this-&gt;ExitApp()</text></g><!--link ExitApp to *end*Run--><g id="link_ExitApp_*end*Run"><path d="M320.45,1140.3233 C298.69,1161.4133 279.4196,1180.0886 267.5996,1191.5386 " fill="none" id="ExitApp-to-*end*Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="263.29,1195.7133,272.5374,1192.3243,266.8813,1192.2344,266.9712,1186.5783,263.29,1195.7133" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="301.63" y="1171.7016">return</text></g><ellipse cx="318.83" cy="1289.135" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="318.83" cy="1289.135" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><!--link *start*Main to Run--><g id="link_*start*Main_Run"><path d="M318.83,535.435 C318.83,545.885 318.83,558.415 318.83,581.815 " fill="none" id="*start*Main-to-Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="318.83,587.815,322.83,578.815,318.83,582.815,314.83,578.815,318.83,587.815" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7461" x="319.83" y="566.6234">this-&gt;Run(pTable)</text></g><!--link Run to *end*Main--><g id="link_Run_*end*Main"><path d="M318.83,1225.295 C318.83,1248.465 318.83,1260.975 318.83,1271.745 " fill="none" id="Run-to-*end*Main" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="318.83,1277.745,322.83,1268.745,318.83,1272.745,314.83,1268.745,318.83,1277.745" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="319.83" y="1256.7034">return</text></g><g id="_tmain.PostMain"><rect fill="#FFD700" height="107.1523" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="193.4082" x="186.13" y="1363.1383"/><line style="stroke:#181818;stroke-width:0.5;" x1="186.13" x2="379.5382" y1="1389.6266" y2="1389.6266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.2363" x="252.2159" y="1381.6734">PostMain</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="191.13" y="1406.2281">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="191.13" y="1420.3609">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168.0059" x="191.13" y="1434.4937">here you deallocate anything</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.0117" x="191.13" y="1448.6266">you allocated at PreMain, or</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173.4082" x="191.13" y="1462.7594">do any other finalization stuff</text></g><!--link *start*_tmain to PreMain--><g id="link_*start*_tmain_PreMain"><path d="M136.84,160.8583 C136.84,172.0883 136.84,186.0683 136.84,207.1883 " fill="none" id="*start*_tmain-to-PreMain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="136.84,213.1883,140.84,204.1883,136.84,208.1883,132.84,204.1883,136.84,213.1883" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.3984" x="137.84" y="192.0566">this-&gt;PreMain(argc, argv)</text></g><!--link PreMain to *end*_tmain--><g id="link_PreMain_*end*_tmain"><path d="M136.84,377.4883 C136.84,635.2083 136.84,1417.9283 136.84,1517.0283 " fill="none" id="PreMain-to-*end*_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="136.84,1523.0283,140.84,1514.0283,136.84,1518.0283,132.84,1514.0283,136.84,1523.0283" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.918" x="137.84" y="1341.7066">FALSE</text></g><!--link PreMain to Main--><g id="link_PreMain_Main"><path d="M162.77,377.4883 C167.82,393.3083 171.6156,405.1624 177.6256,423.9924 " fill="none" id="PreMain-to-Main" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="179.45,429.7083,180.5241,419.9182,177.9297,424.945,172.9029,422.3506,179.45,429.7083" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.6509" x="172.84" y="408.7366">this-&gt;Main(argc, argv)</text></g><!--link Main to PostMain--><g id="link_Main_PostMain"><path d="M289.99,1310.3883 C288.66,1330.0383 287.8544,1341.8119 286.8344,1356.9119 " fill="none" id="Main-to-PostMain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="286.43,1362.8983,291.0275,1354.1883,286.767,1357.9096,283.0457,1353.6492,286.43,1362.8983" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.4883" x="288.84" y="1341.7066">this-&gt;PostMain()</text></g><!--link PostMain to *end*_tmain--><g id="link_PostMain_*end*_tmain"><path d="M215.82,1470.7683 C187.94,1492.8383 163.5848,1512.1147 149.7748,1523.0447 " fill="none" id="PostMain-to-*end*_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="145.07,1526.7683,154.6095,1524.3194,148.9906,1523.6653,149.6447,1518.0464,145.07,1526.7683" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="192.84" y="1501.8566">return</text></g><ellipse cx="253.29" cy="1627.29" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="253.29" cy="1627.29" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><!--link *start* to _tmain--><g id="link_*start*__tmain"><path d="M253.29,26.39 C253.29,39.71 253.29,60.53 253.29,96.59 " fill="none" id="*start*-to-_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="253.29,102.59,257.29,93.59,253.29,97.59,249.29,93.59,253.29,102.59" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.7817" x="254.29" y="69.5684">_tmain(argc, argv)</text></g><!--link _tmain to *end*--><g id="link__tmain_*end*"><path d="M253.29,1555.64 C253.29,1583.37 253.29,1598.29 253.29,1609.92 " fill="none" id="_tmain-to-*end*" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="253.29,1615.92,257.29,1606.92,253.29,1610.92,249.29,1606.92,253.29,1615.92" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[VLLHQzim47xthpZOIpAIb-sjWqBfCYYiK9gEFMnZoBQSQBKb8vtIfMF_VNUsB5jECWY9vFk-y-cxJvUzAYN8fiKZbD8LLhMeZCw-lVq1w_Kr_CH6A0rNOR4GTbUiWBuFoonpA50Ea3zP1Z3G7goyxtcuLsvz7VO97IAA24oyWaytdxSR2lI9X_2RdQdB2VmA5WUZIiYvv4hu6bVmopi4Az5RhVGEdXw_R9RVTKBQIolXQ3mKGeFGeZw-oWHGcAOHkeHQQSar-aPgT0c4mwKiMBENlKHAsMMqFdsLTnHe3A6C1LeVL26x_QoaHLznVsv00wsL1tff0gBatPccUHBrIBv4x1EbewBtiL5ZgnxzoAJredqIUIsNFQYdCIImHjwTLdZJjf4Rzejbm8tnURVwngIOs1n5Zq2qRQqAmKvSdK1pZw0DCZgAwx8PR7tYgV4u0sRmrPotHM5n6n9J1ZPJWCr3ZNYcNq6Mgcim5NnL-lqxk7cuku2Vxc_HrX-LQmKMTFeFKPGvX-K5-hnq6crlx_aOjZFcENXkoIpibqGVyEr_NY3x0rZ9Dzb1NflYMPONu5wZ8Z0Jc1dViAEUkBt7x2oFXTtyJYqJzj4oVNi6rBGz8_EocKPCD9ELjHIEBhC-qjgH86oLEPnEOiXiiWI1Wn6o6MhqKtzbAVoNCNmrpiIc8uT5GhvJR93eruYXpkPUrGYLDSrKKJ9NEy9eEEGIMk4SrKaRlghT9UtAY8FWmJXC9szuq8DZ-4pDOUWEY3XrnupdjPy0el2b74HbxQaIlKkH34fq3zDiHHCpHPQcQv_fXcsbQ6whrsuoKC6-ghAC10X_GU5GsJy0]--></g></svg>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1083px" preserveAspectRatio="none" style="width:823px;height:1083px;background:#FFFFFF;" version="1.1" viewBox="0 0 823 1083" width="823px" zoomAndPan="magnify"><defs/><g><ellipse cx="776.07" cy="287.12" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="40" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55.7734" x="552.18" y="437.14"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.7734" x="557.18" y="462.431">_tmain</text><g id="PreMain"><rect fill="#F1F1F1" height="163.6836" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="235.6777" x="341.23" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="341.23" x2="576.9077" y1="33.4883" y2="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.792" x="432.1729" y="25.5352">PreMain</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215.6777" x="346.23" y="50.0898">(void by default, just returning TRUE)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="346.23" y="64.2227">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.4316" x="346.23" y="78.3555">here you can analyze</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148.623" x="346.23" y="92.4883">command line arguments</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.709" x="346.23" y="106.6211">and decide whether you run</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158.4785" x="346.23" y="120.7539">user mode or service mode</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="346.23" y="134.8867">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.0996" x="346.23" y="149.0195">(return FALSE to prevent</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130.1836" x="346.23" y="163.1523">running service mode)</text></g><g id="Main"><rect fill="#F1F1F1" height="78.8867" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="187.1211" x="150.51" y="247.68"/><line style="stroke:#181818;stroke-width:0.5;" x1="150.51" x2="337.6311" y1="274.1683" y2="274.1683"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.5254" x="227.8079" y="266.2152">Main</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146.4844" x="155.51" y="290.7698">here the table of services</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167.1211" x="155.51" y="304.9027">is built from the service map</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.084" x="155.51" y="319.0355">to be passed to Run()</text></g><rect fill="#F1F1F1" height="40" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="166.07" y="437.14"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.2295" x="177.9553" y="462.431">Run</text><g id="InitApp"><rect fill="#F1F1F1" height="93.0195" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="165.0957" x="20.52" y="587.72"/><line style="stroke:#181818;stroke-width:0.5;" x1="20.52" x2="185.6157" y1="614.2083" y2="614.2083"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.2871" x="78.4243" y="606.2552">InitApp</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="25.52" y="630.8098">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="25.52" y="644.9427">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145.0957" x="25.52" y="659.0755">here you init application,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.5254" x="25.52" y="673.2083">but not your services</text></g><g id="StartServices"><rect fill="#F1F1F1" height="149.5508" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="192.1426" x="7" y="757.74"/><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="199.1426" y1="784.2283" y2="784.2283"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.9414" x="60.1006" y="776.2752">StartServices</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149.4785" x="12" y="800.8298">makes a call of Win32 API</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.9453" x="12" y="814.9627">StartServiceCtrlDispatcher;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="12" y="829.0955">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139.1191" x="12" y="843.2283">this is where SCM starts</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="147.9902" x="12" y="857.3611">bringing your services up</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="12" y="871.4939">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.9727" x="12" y="885.6267">the call remains blocked</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172.1426" x="12" y="899.7595">untill all the services got shut</text></g><g id="ExitApp"><rect fill="#F1F1F1" height="93.0195" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="199.918" x="77.11" y="984.29"/><line style="stroke:#181818;stroke-width:0.5;" x1="77.11" x2="277.028" y1="1010.7783" y2="1010.7783"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.7393" x="150.6994" y="1002.8252">ExitApp</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="82.11" y="1027.3798">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="82.11" y="1041.5127">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179.918" x="82.11" y="1055.6455">here you release any resources</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113.3906" x="82.11" y="1069.7783">allocated at InitApp</text></g><g id="PostMain"><rect fill="#F1F1F1" height="107.1523" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="193.4082" x="284.37" y="403.57"/><line style="stroke:#181818;stroke-width:0.5;" x1="284.37" x2="477.7782" y1="430.0583" y2="430.0583"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.2363" x="350.4559" y="422.1052">PostMain</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.5059" x="289.37" y="446.6598">(void by default)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.7969" x="289.37" y="460.7927">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168.0059" x="289.37" y="474.9255">here you deallocate anything</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.0117" x="289.37" y="489.0583">you allocated at PreMain, or</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173.4082" x="289.37" y="503.1911">do any other finalization stuff</text></g><ellipse cx="580.07" cy="634.23" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="580.07" cy="634.23" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><!--link *start* to _tmain--><g id="link_*start*__tmain"><path d="M769.76,295.18 C762.58,303.08 750.38,316.15 739.07,326.57 C694.01,368.05 642.4947,408.6434 610.4047,433.2034 " fill="none" id="*start*-to-_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="605.64,436.85,615.2181,434.5565,609.6106,433.8111,610.3559,428.2036,605.64,436.85" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.7817" x="702.07" y="370.1384">_tmain(argc, argv)</text></g><!--link _tmain to PreMain--><g id="link__tmain_PreMain"><path d="M576.39,436.86 C569.05,399.71 551.28,315.83 528.07,247.68 C519.44,222.34 510.8269,200.9217 500.1369,176.6317 " fill="none" id="_tmain-to-PreMain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="497.72,171.14,497.6842,180.9888,499.7341,175.7164,505.0065,177.7663,497.72,171.14" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.3984" x="552.07" y="292.1884">this-&gt;PreMain(argc, argv)</text></g><!--link PreMain to _tmain--><g id="link_PreMain__tmain"><path d="M458.18,170.91 C460.12,217.8 466.86,277.12 486.07,326.57 C503.18,370.61 534.924,408.9156 557.074,432.6256 " fill="none" id="PreMain-to-_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="561.17,437.01,557.949,427.7027,557.7567,433.3563,552.1031,433.164,561.17,437.01" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.918" x="487.07" y="292.1884">FALSE</text></g><!--link PreMain to Main--><g id="link_PreMain_Main"><path d="M340.82,155.55 C322.19,168.99 304.14,184.14 289.07,200.68 C276.76,214.19 269.3503,226.2684 261.9403,241.8984 " fill="none" id="PreMain-to-Main" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="259.37,247.32,266.8398,240.9012,261.5119,242.802,259.6111,237.4741,259.37,247.32" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.6509" x="290.07" y="214.2484">this-&gt;Main(argc, argv)</text></g><!--link Main to Run--><g id="link_Main_Run"><path d="M231.91,326.67 C221.03,361.16 207.344,404.5576 198.914,431.2976 " fill="none" id="Main-to-Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="197.11,437.02,203.6309,429.6391,198.6134,432.2514,196.0011,427.2338,197.11,437.02" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7461" x="224.07" y="370.1384">this-&gt;Run(pTable)</text></g><!--link Run to Main--><g id="link_Run_Main"><path d="M172.29,436.7 C155.03,416.36 134.1,383.69 148.07,356.57 C153.88,345.29 157.9709,339.3739 167.7109,330.9539 " fill="none" id="Run-to-Main" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="172.25,327.03,162.8255,329.8898,168.4675,330.2999,168.0574,335.9419,172.25,327.03" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="149.07" y="370.1384">return</text></g><!--link Run to InitApp--><g id="link_Run_InitApp"><path d="M165.82,464.66 C132.64,474.74 75.7,497.59 51.07,540.72 C42.39,555.92 44.0593,567.5369 53.6893,582.4769 " fill="none" id="Run-to-InitApp" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="56.94,587.52,55.4261,577.7882,54.2311,583.3174,48.7019,582.1224,56.94,587.52" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.3926" x="52.07" y="554.2884">this-&gt;InitApp()</text></g><!--link InitApp to Run--><g id="link_InitApp_Run"><path d="M134.91,587.39 C140.98,577.79 147,567.59 152.07,557.72 C165.9,530.8 176.0076,503.4737 182.9176,483.0437 " fill="none" id="InitApp-to-Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="184.84,477.36,178.1673,484.604,183.238,482.0964,185.7456,487.1671,184.84,477.36" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.918" x="161.07" y="554.2884">FALSE</text></g><!--link InitApp to StartServices--><g id="link_InitApp_StartServices"><path d="M103.07,680.76 C103.07,703.52 103.07,725.64 103.07,751.41 " fill="none" id="InitApp-to-StartServices" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="103.07,757.41,107.07,748.41,103.07,752.41,99.07,748.41,103.07,757.41" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.4937" x="104.07" y="724.3084">TRUE</text></g><!--link StartServices to ExitApp--><g id="link_StartServices_ExitApp"><path d="M112.29,907.71 C115.59,923.44 120.05,939.69 126.07,954.29 C130.23,964.38 132.6405,969.4569 138.6305,978.8769 " fill="none" id="StartServices-to-ExitApp" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="141.85,983.94,140.3961,974.199,139.1671,979.7208,133.6453,978.4917,141.85,983.94" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.5981" x="127.07" y="950.8584">this-&gt;ExitApp()</text></g><!--link ExitApp to Run--><g id="link_ExitApp_Run"><path d="M215.79,983.83 C221.67,974.57 226.84,964.52 230.07,954.29 C232.35,947.09 230.3,944.84 230.07,937.29 C224.74,760.8 227.22,716.02 206.07,540.72 C203.44,518.88 199.906,499.9455 196.456,483.2755 " fill="none" id="ExitApp-to-Run" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="195.24,477.4,193.147,487.0239,196.2533,482.2962,200.981,485.4026,195.24,477.4" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="225.07" y="724.3084">return</text></g><!--link Main to PostMain--><g id="link_Main_PostMain"><path d="M318.14,327 C329.66,335.53 340.55,345.41 349.07,356.57 C359.43,370.13 364.7777,381.4095 369.5777,397.5295 " fill="none" id="Main-to-PostMain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="371.29,403.28,372.5552,393.5127,369.8631,398.4879,364.8879,395.7958,371.29,403.28" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="360.07" y="370.1384">return</text></g><!--link PostMain to _tmain--><g id="link_PostMain__tmain"><path d="M478.24,457.14 C505.27,457.14 526.54,457.14 546.04,457.14 " fill="none" id="PostMain-to-_tmain" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="552.04,457.14,543.04,453.14,547.04,457.14,543.04,461.14,552.04,457.14" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38.8794" x="495.98" y="450.7084">return</text></g><!--link _tmain to *end*--><g id="link__tmain_*end*"><path d="M580.07,477.55 C580.07,514.59 580.07,588.21 580.07,616.77 " fill="none" id="_tmain-to-*end*" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="580.07,622.77,584.07,613.77,580.07,617.77,576.07,613.77,580.07,622.77" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[RPHDRzim38Rl_XKyfaDoMMyRK23eKg302WHDXnssOP1jEL4hIu94fKj__KX_o7AIIsAHZoY-9AM3gYN8rk49QXaghnmgQufVd_x0QdK7Vx4Loi2NuMCX_BvQ0lqURuh1nzZMowUUmuCAgxjXFSD79e_wiFw-snJJxiNHgXfApgKHKUCINcD0y1AZDyhiuUNvn-Rcjycs7AINSB8HAc506A5F7p9pLxPjXQb1AoCvaTXAWo43s5dBYilmVf18uRfeFkQ7n43crX9ZFT3tKLMoMyzIMVHvzge0BJWlZtHSXb3OJaSU8oiDrMPMnuiY5ebxZXD6tmlt8afDiVAoa1f0DeDjnYF3IAW0PLGQeV6sxT2Kb70mKgIYbE142BBc1Hz5QV3fbCIZKRXsBYKoh8cOFESzvVPDtjG-HIOGpcbL2Hx1PGQL4S5OPCvFEX8mbQEVfzo-G-5nDsmXWWUeE3Usuet-1OsGrbogdyhSVeRrzl62pDVtwFKt5Pp0YbHy9LddD1U5w_pUgTpTFq5W8bo0fQUXuBcOAOJehWQLVQ9UyYsYBcfRlSdw0em65M6CPjqDiATAXaF4ucm7bslpRzxGOKqDdJpN6ZfvKqEzr584kdJcHD-1X77J9f3oijHg6Yk1uo0bT-feVwN6UHjlKMzCTs5h0yvTHJBbpytWpF1hMZ9t4bFBCLtMGxKn-vnZPAPdkD5BUYzohhPTEMptp3IANYlrqKqx3KPicY9_K-a9Blu3]--></g></svg>